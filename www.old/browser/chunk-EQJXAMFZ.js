import{a as Le}from"./chunk-DMCD4AVH.js";import{a as ve}from"./chunk-5PFP4YBL.js";import{a as Ee,c as Ce}from"./chunk-AHQAHTAS.js";import{A as ie,B as D,Ca as pe,Da as he,E as oe,Ea as ge,F as W,Ha as be,Ia as we,L as ae,La as ye,M as j,Ma as Pe,N as A,Q as T,R as y,S as b,T as O,V as B,Y as L,Z as se,ga as le,oa as X,ra as ce,va as de,xa as ue,ya as me,za as fe}from"./chunk-QAHDMDZU.js";import"./chunk-F4FQDMWJ.js";import"./chunk-3STR3EXB.js";import"./chunk-G5YFBQQC.js";import"./chunk-LMXK6WMC.js";import"./chunk-4PGTP63H.js";import"./chunk-RXI45IKK.js";import"./chunk-HC6MZPB3.js";import"./chunk-U5TRODAZ.js";import"./chunk-HCPCAHMU.js";import"./chunk-CXMZVXPG.js";import"./chunk-O6QZTMED.js";import"./chunk-FERD25SW.js";import"./chunk-DGQDX2SM.js";import"./chunk-GBAD7PMF.js";import"./chunk-MM5QLNJM.js";import"./chunk-72KDLSWN.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-4UAGJSVW.js";import"./chunk-MCRJI3T3.js";import"./chunk-TLUQMX4X.js";import"./chunk-53QC3E2F.js";import{g as l}from"./chunk-EGHARNWC.js";var We=n=>{let e=new Map;e.set("web",{name:"web"});let o=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(i,s)=>{o.platforms.set(i,s)},t=i=>{o.platforms.has(i)&&(o.currentPlatform=o.platforms.get(i))};return o.addPlatform=r,o.setPlatform=t,o},Be=n=>n.CapacitorPlatforms=We(n),ke=Be(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ze=ke.addPlatform,et=ke.setPlatform;var $=function(n){return n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE",n}($||{}),P=class extends Error{constructor(e,o,r){super(e),this.message=e,this.code=o,this.data=r}},Ge=n=>{var e,o;return n!=null&&n.androidBridge?"android":!((o=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||o===void 0)&&o.bridge?"ios":"web"},Ke=n=>{var e,o,r,t,i;let s=n.CapacitorCustomPlatform||null,a=n.Capacitor||{},d=a.Plugins=a.Plugins||{},c=n.CapacitorPlatforms,x=()=>s!==null?s.name:Ge(n),k=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||x,V=()=>k()!=="web",Oe=((o=c==null?void 0:c.currentPlatform)===null||o===void 0?void 0:o.isNativePlatform)||V,_e=u=>{let m=J.get(u);return!!(m!=null&&m.platforms.has(k())||te(u))},je=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||_e,Te=u=>{var m;return(m=a.PluginHeaders)===null||m===void 0?void 0:m.find(U=>U.name===u)},te=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.getPluginHeader)||Te,$e=u=>n.console.error(u),Re=(u,m,U)=>Promise.reject(`${U} does not have an implementation of "${m}".`),J=new Map,Fe=(u,m={})=>{let U=J.get(u);if(U)return console.warn(`Capacitor plugin "${u}" already registered. Cannot register plugins twice.`),U.proxy;let I=k(),S=te(u),w,He=()=>l(void 0,null,function*(){return!w&&I in m?w=typeof m[I]=="function"?w=yield m[I]():w=m[I]:s!==null&&!w&&"web"in m&&(w=typeof m.web=="function"?w=yield m.web():w=m.web),w}),qe=(f,p)=>{var g,E;if(S){let C=S==null?void 0:S.methods.find(h=>p===h.name);if(C)return C.rtype==="promise"?h=>a.nativePromise(u,p.toString(),h):(h,H)=>a.nativeCallback(u,p.toString(),h,H);if(f)return(g=f[p])===null||g===void 0?void 0:g.bind(f)}else{if(f)return(E=f[p])===null||E===void 0?void 0:E.bind(f);throw new P(`"${u}" plugin is not implemented on ${I}`,$.Unimplemented)}},N=f=>{let p,g=(...E)=>{let C=He().then(h=>{let H=qe(h,f);if(H){let q=H(...E);return p=q==null?void 0:q.remove,q}else throw new P(`"${u}.${f}()" is not implemented on ${I}`,$.Unimplemented)});return f==="addListener"&&(C.remove=()=>l(void 0,null,function*(){return p()})),C};return g.toString=()=>`${f.toString()}() { [capacitor code] }`,Object.defineProperty(g,"name",{value:f,writable:!1,configurable:!1}),g},re=N("addListener"),ne=N("removeListener"),De=(f,p)=>{let g=re({eventName:f},p),E=()=>l(void 0,null,function*(){let h=yield g;ne({eventName:f,callbackId:h},p)}),C=new Promise(h=>g.then(()=>h({remove:E})));return C.remove=()=>l(void 0,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield E()}),C},Q=new Proxy({},{get(f,p){switch(p){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return S?De:re;case"removeListener":return ne;default:return N(p)}}});return d[u]=Q,J.set(u,{name:u,proxy:Q,platforms:new Set([...Object.keys(m),...S?[I]:[]])}),Q},Me=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||Fe;return a.convertFileSrc||(a.convertFileSrc=u=>u),a.getPlatform=k,a.handleError=$e,a.isNativePlatform=Oe,a.isPluginAvailable=je,a.pluginMethodNoop=Re,a.registerPlugin=Me,a.Exception=P,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},ze=n=>n.Capacitor=Ke(n),G=ze(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),K=G.registerPlugin,tt=G.Plugins;var _=class{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,o){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(o);let i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);let s=()=>l(this,null,function*(){return this.removeListener(e,o)});return Promise.resolve({remove:s})}removeAllListeners(){return l(this,null,function*(){this.listeners={};for(let e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}})}notifyListeners(e,o,r){let t=this.listeners[e];if(!t){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(o),this.retainedEventArguments[e]=i}return}t.forEach(i=>i(o))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,o){this.windowListeners[o]={registered:!1,windowEventName:e,pluginEventName:o,handler:r=>{this.notifyListeners(o,r)}}}unimplemented(e="not implemented"){return new G.Exception(e,$.Unimplemented)}unavailable(e="not available"){return new G.Exception(e,$.Unavailable)}removeListener(e,o){return l(this,null,function*(){let r=this.listeners[e];if(!r)return;let t=r.indexOf(o);this.listeners[e].splice(t,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])})}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){let o=this.retainedEventArguments[e];o&&(delete this.retainedEventArguments[e],o.forEach(r=>{this.notifyListeners(e,r)}))}};var Ie=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),xe=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),Y=class extends _{getCookies(){return l(this,null,function*(){let e=document.cookie,o={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[t,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");t=xe(t).trim(),i=xe(i).trim(),o[t]=i}),o})}setCookie(e){return l(this,null,function*(){try{let o=Ie(e.key),r=Ie(e.value),t=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),s=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${o}=${r||""}${t}; path=${i}; ${s};`}catch(o){return Promise.reject(o)}})}deleteCookie(e){return l(this,null,function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(o){return Promise.reject(o)}})}clearCookies(){return l(this,null,function*(){try{let e=document.cookie.split(";")||[];for(let o of e)document.cookie=o.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})}clearAllCookies(){return l(this,null,function*(){try{yield this.clearCookies()}catch(e){return Promise.reject(e)}})}},rt=K("CapacitorCookies",{web:()=>new Y}),Ve=n=>l(void 0,null,function*(){return new Promise((e,o)=>{let r=new FileReader;r.onload=()=>{let t=r.result;e(t.indexOf(",")>=0?t.split(",")[1]:t)},r.onerror=t=>o(t),r.readAsDataURL(n)})}),Je=(n={})=>{let e=Object.keys(n);return Object.keys(n).map(t=>t.toLocaleLowerCase()).reduce((t,i,s)=>(t[i]=n[e[s]],t),{})},Ne=(n,e=!0)=>n?Object.entries(n).reduce((r,t)=>{let[i,s]=t,a,d;return Array.isArray(s)?(d="",s.forEach(c=>{a=e?encodeURIComponent(c):c,d+=`${i}=${a}&`}),d.slice(0,-1)):(a=e?encodeURIComponent(s):s,d=`${i}=${a}`),`${r}&${d}`},"").substr(1):null,Qe=(n,e={})=>{let o=Object.assign({method:n.method||"GET",headers:n.headers},e),t=Je(n.headers)["content-type"]||"";if(typeof n.data=="string")o.body=n.data;else if(t.includes("application/x-www-form-urlencoded")){let i=new URLSearchParams;for(let[s,a]of Object.entries(n.data||{}))i.set(s,a);o.body=i.toString()}else if(t.includes("multipart/form-data")||n.data instanceof FormData){let i=new FormData;if(n.data instanceof FormData)n.data.forEach((a,d)=>{i.append(d,a)});else for(let a of Object.keys(n.data))i.append(a,n.data[a]);o.body=i;let s=new Headers(o.headers);s.delete("content-type"),o.headers=s}else(t.includes("application/json")||typeof n.data=="object")&&(o.body=JSON.stringify(n.data));return o},Z=class extends _{request(e){return l(this,null,function*(){let o=Qe(e,e.webFetchExtra),r=Ne(e.params,e.shouldEncodeUrlParams),t=r?`${e.url}?${r}`:e.url,i=yield fetch(t,o),s=i.headers.get("content-type")||"",{responseType:a="text"}=i.ok?e:{};s.includes("application/json")&&(a="json");let d,c;switch(a){case"arraybuffer":case"blob":c=yield i.blob(),d=yield Ve(c);break;case"json":d=yield i.json();break;case"document":case"text":default:d=yield i.text()}let x={};return i.headers.forEach((k,V)=>{x[V]=k}),{data:d,headers:x,status:i.status,url:i.url}})}get(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))})}post(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))})}put(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))})}patch(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})}delete(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})}},nt=K("CapacitorHttp",{web:()=>new Z});var v=function(n){return n.Prompt="PROMPT",n.Camera="CAMERA",n.Photos="PHOTOS",n}(v||{}),R=function(n){return n.Rear="REAR",n.Front="FRONT",n}(R||{}),z=function(n){return n.Uri="uri",n.Base64="base64",n.DataUrl="dataUrl",n}(z||{});var F=class extends _{getPhoto(e){return l(this,null,function*(){return new Promise((o,r)=>l(this,null,function*(){if(e.webUseInput||e.source===v.Photos)this.fileInputExperience(e,o,r);else if(e.source===v.Prompt){let t=document.querySelector("pwa-action-sheet");t||(t=document.createElement("pwa-action-sheet"),document.body.appendChild(t)),t.header=e.promptLabelHeader||"Photo",t.cancelable=!1,t.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],t.addEventListener("onSelection",i=>l(this,null,function*(){i.detail===0?this.fileInputExperience(e,o,r):this.cameraExperience(e,o,r)}))}else this.cameraExperience(e,o,r)}))})}pickImages(e){return l(this,null,function*(){return new Promise((o,r)=>l(this,null,function*(){this.multipleFileInputExperience(o,r)}))})}cameraExperience(e,o,r){return l(this,null,function*(){if(customElements.get("pwa-camera-modal")){let t=document.createElement("pwa-camera-modal");t.facingMode=e.direction===R.Front?"user":"environment",document.body.appendChild(t);try{yield t.componentOnReady(),t.addEventListener("onPhoto",i=>l(this,null,function*(){let s=i.detail;s===null?r(new P("User cancelled photos app")):s instanceof Error?r(s):o(yield this._getCameraPhoto(s,e)),t.dismiss(),document.body.removeChild(t)})),t.present()}catch{this.fileInputExperience(e,o,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,o,r)})}fileInputExperience(e,o,r){let t=document.querySelector("#_capacitor-camera-input"),i=()=>{var s;(s=t.parentNode)===null||s===void 0||s.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input",t.type="file",t.hidden=!0,document.body.appendChild(t),t.addEventListener("change",s=>{let a=t.files[0],d="jpeg";if(a.type==="image/png"?d="png":a.type==="image/gif"&&(d="gif"),e.resultType==="dataUrl"||e.resultType==="base64"){let c=new FileReader;c.addEventListener("load",()=>{if(e.resultType==="dataUrl")o({dataUrl:c.result,format:d});else if(e.resultType==="base64"){let x=c.result.split(",")[1];o({base64String:x,format:d})}i()}),c.readAsDataURL(a)}else o({webPath:URL.createObjectURL(a),format:d}),i()}),t.addEventListener("cancel",s=>{r(new P("User cancelled photos app")),i()})),t.accept="image/*",t.capture=!0,e.source===v.Photos||e.source===v.Prompt?t.removeAttribute("capture"):e.direction===R.Front?t.capture="user":e.direction===R.Rear&&(t.capture="environment"),t.click()}multipleFileInputExperience(e,o){let r=document.querySelector("#_capacitor-camera-input-multiple"),t=()=>{var i;(i=r.parentNode)===null||i===void 0||i.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",i=>{let s=[];for(let a=0;a<r.files.length;a++){let d=r.files[a],c="jpeg";d.type==="image/png"?c="png":d.type==="image/gif"&&(c="gif"),s.push({webPath:URL.createObjectURL(d),format:c})}e({photos:s}),t()}),r.addEventListener("cancel",i=>{o(new P("User cancelled photos app")),t()})),r.accept="image/*",r.click()}_getCameraPhoto(e,o){return new Promise((r,t)=>{let i=new FileReader,s=e.type.split("/")[1];o.resultType==="uri"?r({webPath:URL.createObjectURL(e),format:s,saved:!1}):(i.readAsDataURL(e),i.onloadend=()=>{let a=i.result;o.resultType==="dataUrl"?r({dataUrl:a,format:s,saved:!1}):r({base64String:a.split(",")[1],format:s,saved:!1})},i.onerror=a=>{t(a)})})}checkPermissions(){return l(this,null,function*(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}})}requestPermissions(){return l(this,null,function*(){throw this.unimplemented("Not implemented on web.")})}pickLimitedLibraryPhotos(){return l(this,null,function*(){throw this.unavailable("Not implemented on web.")})}getLimitedLibraryPhotos(){return l(this,null,function*(){throw this.unavailable("Not implemented on web.")})}},ct=new F;var M=K("Camera",{web:()=>new F});var Ue=(()=>{let e=class e{constructor(){}selectImageFromGallery(){return l(this,null,function*(){let r={source:v.Photos,resultType:z.DataUrl,quality:100};try{return yield M.getPhoto(r)}catch(t){return console.error("Erreur lors du choix de l'image :",t),null}})}takePhoto(){return l(this,null,function*(){let r={resultType:z.DataUrl,source:v.Camera,allowEditing:!0,quality:100};try{return(yield this.checkCameraPermission())||(yield this.requestCameraPermission()),yield M.getPhoto(r)}catch(t){return console.error("Erreur lors de la prise de photo :",t),null}})}checkCameraPermission(){return l(this,null,function*(){return(yield M.checkPermissions()).camera})}requestCameraPermission(){return l(this,null,function*(){if(!(yield M.requestPermissions({permissions:["camera"]})).camera)throw new Error("Permission not granted for camera")})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Se=(()=>{let e=class e{constructor(r,t,i,s,a){this.imageSelectionService=r,this.auth=t,this.firestore=i,this.storage=s,this.toastCtrl=a,this.image="https://www.kasterencultuur.nl/editor/placeholder.jpg",this.description="",this.user=t.getCurrentUser()}selectImage(r){return l(this,null,function*(){if(r==="camera"){console.log("camera");let t=yield this.imageSelectionService.takePhoto();this.imageInfos=t,this.image=this.imageInfos.dataUrl}else{console.log("library");let t=yield this.imageSelectionService.selectImageFromGallery();this.imageInfos=t,this.image=this.imageInfos.dataUrl}})}publish(){return l(this,null,function*(){let r=Math.random().toString(36).substring(2,8),t=`Images/${new Date().getTime()}_${r}`,i=this.dataUrltoBlob(this.imageInfos.dataUrl),s=this.storage.upload(t,i);s.percentageChanges().subscribe(a=>{this.uploadProgress=a}),s.then(a=>l(this,null,function*(){this.firestore.collection("Images").add({storageid:t,description:this.description,email:this.user})}))})}dataUrltoBlob(r){for(var t=r.split(","),i=t[0].match(/:(.*?);/)[1],s=atob(t[1]),a=s.length,d=new Uint8Array(a);a--;)d[a]=s.charCodeAt(a);return new Blob([d],{type:i})}};e.\u0275fac=function(t){return new(t||e)(A(Ue),A(ve),A(Ee),A(Ce),A(ye))},e.\u0275cmp=oe({type:e,selectors:[["app-home"]],decls:31,vars:5,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["expand","block","color","success",3,"click"],["slot","start","name","image"],["slot","start","name","camera"],[1,"flex"],[1,"img-box"],[3,"src"],["color","tertiary",3,"value"],["expand","block","color","tertiary",3,"click"],["slot","start","name","camera","c",""]],template:function(t,i){t&1&&(y(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),L(3," Home "),b()()(),y(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),L(8,"Home"),b()()(),y(9,"ion-button",4),B("click",function(){return i.selectImage("library")}),O(10,"ion-icon",5),L(11," S\xE9lectionner une image "),b(),y(12,"ion-button",4),B("click",function(){return i.selectImage("camera")}),O(13,"ion-icon",6),L(14," Prendre une photo "),b(),y(15,"div",7)(16,"div",8),O(17,"img",9)(18,"br")(19,"ion-progress-bar",10),b()(),y(20,"ion-item")(21,"ion-label")(22,"p"),L(23,"utilisateur"),b(),y(24,"h2")(25,"b"),L(26),b()()()(),y(27,"ion-button",11),B("click",function(){return i.publish()}),O(28,"ion-icon",12),L(29," Publier "),b(),O(30,"div"),b()),t&2&&(T("translucent",!0),j(4),T("fullscreen",!0),j(13),T("src",i.image,ae),j(2),T("value",i.uploadProgress),j(7),se(i.user))},dependencies:[de,ue,me,fe,pe,he,ge,be,we],styles:[".flex[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.img-box[_ngcontent-%COMP%]{height:200px;overflow:hidden}img[_ngcontent-%COMP%]{height:200px}"]});let n=e;return n})();var Ye=[{path:"",component:Se}],Ae=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=W({type:e}),e.\u0275inj=D({imports:[X.forChild(Ye),X]});let n=e;return n})();var Tt=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=W({type:e}),e.\u0275inj=D({imports:[Pe,le,ce,Le,Ae]});let n=e;return n})();export{Tt as HomePageModule};
